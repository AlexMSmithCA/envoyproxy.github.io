.. _envoy_api_file_api/filter/accesslog.proto:

api/filter/accesslog.proto
==========================

Envoy access logs describe incoming interaction with Envoy over a fixed
period of time, and typically cover a single request/response exchange,
(e.g. HTTP), stream (e.g. over HTTP/gRPC), or proxied connection (e.g. TCP).
Access logs contain fields defined in protocol-specific protobuf messages.

Except where explicitly declared otherwise, all fields describe
*downstream* interaction between Envoy and a connected client.
Fields describing *upstream* interaction will explicitly include ``upstream``
in their name.

.. _envoy_api_msg_filter.AccessLogCommon:

filter.AccessLogCommon
----------------------

`[filter.AccessLogCommon proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L27>`_

Defines fields that are shared by all Envoy access logs.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "sample_rate": "...",
    "destination_host": "{...}",
    "tls_properties": "{...}",
    "start_time": "{...}",
    "time_to_last_rx_byte": "{...}",
    "time_to_first_upstream_rx_byte": "{...}",
    "time_to_last_upstream_rx_byte": "{...}",
    "upstream_host": "{...}",
    "upstream_cluster": "...",
    "response_flags": "{...}",
    "metadata": "{...}"
  }

.. _envoy_api_field_filter.AccessLogCommon.sample_rate:

sample_rate
  (`double <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) This field indicates the rate at which this log entry was sampled.
  Valid range is (0.0, 1.0].
  
  
.. _envoy_api_field_filter.AccessLogCommon.destination_host:

destination_host
  (:ref:`SocketAddress <envoy_api_msg_SocketAddress>`) This field is the IP and port on which the request from the user was
  received.
  
  
.. _envoy_api_field_filter.AccessLogCommon.tls_properties:

tls_properties
  (:ref:`filter.TLSProperties <envoy_api_msg_filter.TLSProperties>`) If the connection is secure, this field will contain TLS properties.
  
  
.. _envoy_api_field_filter.AccessLogCommon.start_time:

start_time
  (`Timestamp <https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#timestamp>`_) The time that Envoy started servicing this request
  
  
.. _envoy_api_field_filter.AccessLogCommon.time_to_last_rx_byte:

time_to_last_rx_byte
  (`Duration <https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>`_) Interval between the first downstream byte received and the last
  downstream byte received (i.e. time it takes to receive a request).
  
  
.. _envoy_api_field_filter.AccessLogCommon.time_to_first_upstream_rx_byte:

time_to_first_upstream_rx_byte
  (`Duration <https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>`_) Interval between the first downstream byte received and the first upstream
  byte received (i.e. time it takes to start receiving a response).
  
  
.. _envoy_api_field_filter.AccessLogCommon.time_to_last_upstream_rx_byte:

time_to_last_upstream_rx_byte
  (`Duration <https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>`_) Interval between the first downstream byte received and the last upstream
  byte received (i.e. time it takes to receive a complete response).
  
  
.. _envoy_api_field_filter.AccessLogCommon.upstream_host:

upstream_host
  (:ref:`SocketAddress <envoy_api_msg_SocketAddress>`) The (primary) upstream host that handles this exchange.
  
  
.. _envoy_api_field_filter.AccessLogCommon.upstream_cluster:

upstream_cluster
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) The upstream cluster that ``upstream_host`` belongs to.
  
  
.. _envoy_api_field_filter.AccessLogCommon.response_flags:

response_flags
  (:ref:`filter.ResponseFlags <envoy_api_msg_filter.ResponseFlags>`) Flags indicating occurences during request/response processing.
  
  
.. _envoy_api_field_filter.AccessLogCommon.metadata:

metadata
  (:ref:`Metadata <envoy_api_msg_Metadata>`) All metadata encountered during request processing, including endpoint
  selection.
  
  This can be used to associate IDs attached to the various configurations
  used to process this request with the access log entry.  For example, a
  route created from a higher level forwarding rule with some ID can place
  that ID in this field and cross reference later. It can also be used to
  determine if a canary endpoint was used or not.
  
  


.. _envoy_api_msg_filter.ResponseFlags:

filter.ResponseFlags
--------------------

`[filter.ResponseFlags proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L76>`_

Flags indicating occurences during request/response processing.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "failed_local_healthcheck": "...",
    "no_healthy_upstream": "...",
    "upstream_request_timeout": "...",
    "local_reset": "...",
    "upstream_remote_reset": "...",
    "upstream_connection_failure": "...",
    "upstream_connection_termination": "...",
    "upstream_overflow": "...",
    "no_route_found": "...",
    "delay_injected": "...",
    "fault_injected": "...",
    "rate_limited": "..."
  }

.. _envoy_api_field_filter.ResponseFlags.failed_local_healthcheck:

failed_local_healthcheck
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates local server healthcheck failed.
  
  
.. _envoy_api_field_filter.ResponseFlags.no_healthy_upstream:

no_healthy_upstream
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates there was no healthy upstream.
  
  
.. _envoy_api_field_filter.ResponseFlags.upstream_request_timeout:

upstream_request_timeout
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates an there was an upstream request timeout.
  
  
.. _envoy_api_field_filter.ResponseFlags.local_reset:

local_reset
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates local codec level reset was sent on the stream.
  
  
.. _envoy_api_field_filter.ResponseFlags.upstream_remote_reset:

upstream_remote_reset
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates remote codec level reset was received on the stream.
  
  
.. _envoy_api_field_filter.ResponseFlags.upstream_connection_failure:

upstream_connection_failure
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates there was a local reset by a connection pool due to an initial connection failure.
  
  
.. _envoy_api_field_filter.ResponseFlags.upstream_connection_termination:

upstream_connection_termination
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates the stream was reset locally due to connection termination.
  
  
.. _envoy_api_field_filter.ResponseFlags.upstream_overflow:

upstream_overflow
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates the stream was reset because of a resource overflow.
  
  
.. _envoy_api_field_filter.ResponseFlags.no_route_found:

no_route_found
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates no route was found for the request.
  
  
.. _envoy_api_field_filter.ResponseFlags.delay_injected:

delay_injected
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates that the request was delayed before proxying.
  
  
.. _envoy_api_field_filter.ResponseFlags.fault_injected:

fault_injected
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates that the request was aborted with an injected error code.
  
  
.. _envoy_api_field_filter.ResponseFlags.rate_limited:

rate_limited
  (`bool <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Indicates that the request was rate-limited locally.
  
  


.. _envoy_api_msg_filter.TLSProperties:

filter.TLSProperties
--------------------

`[filter.TLSProperties proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L116>`_

Properties of a negotiated TLS connection.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "tls_version": "...",
    "tls_cipher_suite": "{...}",
    "tls_sni_hostname": "..."
  }

.. _envoy_api_field_filter.TLSProperties.tls_version:

tls_version
  (:ref:`filter.TLSProperties.TLSVersion <envoy_api_enum_filter.TLSProperties.TLSVersion>`) Version of TLS that was negotiated.
  
  
.. _envoy_api_field_filter.TLSProperties.tls_cipher_suite:

tls_cipher_suite
  (`UInt32Value <https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value>`_) TLS cipher suite negotiated during handshake. The value is a
  four-digit hex code defined by the IANA TLS Cipher Suite Registry
  (e.g. ``009C`` for ``TLS_RSA_WITH_AES_128_GCM_SHA256``).
  
  Here it is expressed as an integer.
  
  
.. _envoy_api_field_filter.TLSProperties.tls_sni_hostname:

tls_sni_hostname
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) SNI hostname from handshake.
  
  

.. _envoy_api_enum_filter.TLSProperties.TLSVersion:

Enum filter.TLSProperties.TLSVersion
------------------------------------

`[filter.TLSProperties.TLSVersion proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L117>`_



.. WARNING::
 This enum type has :ref:`draft <config_overview_v2_status>` status.
.. _envoy_api_enum_value_filter.TLSProperties.TLSVersion.VERSION_UNSPECIFIED:

VERSION_UNSPECIFIED
  *(DEFAULT)* ⁣
  
.. _envoy_api_enum_value_filter.TLSProperties.TLSVersion.TLSv1:

TLSv1
  ⁣
  
.. _envoy_api_enum_value_filter.TLSProperties.TLSVersion.TLSv1_1:

TLSv1_1
  ⁣
  
.. _envoy_api_enum_value_filter.TLSProperties.TLSVersion.TLSv1_2:

TLSv1_2
  ⁣
  
.. _envoy_api_enum_value_filter.TLSProperties.TLSVersion.TLSv1_3:

TLSv1_3
  ⁣
  

.. _envoy_api_msg_filter.TCPAccessLogEntry:

filter.TCPAccessLogEntry
------------------------

`[filter.TCPAccessLogEntry proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L139>`_



.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "common_properties": "{...}"
  }

.. _envoy_api_field_filter.TCPAccessLogEntry.common_properties:

common_properties
  (:ref:`filter.AccessLogCommon <envoy_api_msg_filter.AccessLogCommon>`) Common properties shared by all Envoy access logs.
  
  


.. _envoy_api_msg_filter.HTTPRequestProperties:

filter.HTTPRequestProperties
----------------------------

`[filter.HTTPRequestProperties proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L145>`_



.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "request_method": "...",
    "scheme": "...",
    "authority": "...",
    "port": "{...}",
    "path": "...",
    "user_agent": "...",
    "referer": "...",
    "forwarded_for": "...",
    "request_id": "...",
    "original_path": "...",
    "request_headers_bytes": "...",
    "request_body_bytes": "...",
    "request_headers": "{...}"
  }

.. _envoy_api_field_filter.HTTPRequestProperties.request_method:

request_method
  (:ref:`RequestMethod <envoy_api_enum_RequestMethod>`) The request method (RFC 7231/2616).
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.scheme:

scheme
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) The scheme portion of the incoming request URI.
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.authority:

authority
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) HTTP/2 ``:authority`` or HTTP/1.1 ``Host`` header value.
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.port:

port
  (`UInt32Value <https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value>`_) The port of the incoming request URI
  (unused currently, as port is composed onto authority).
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.path:

path
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) The path portion from the incoming request URI.
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.user_agent:

user_agent
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Value of the ``User-Agent`` request header.
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.referer:

referer
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Value of the ``Referer`` request header.
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.forwarded_for:

forwarded_for
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Value of the ``X-Forwarded-For`` request header.
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.request_id:

request_id
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Value of the ``X-Request-Id`` request header
  
  This header is used by Envoy to uniquely identify a request.
  It will be generated for all external requests and internal requests that
  do not already have a request ID.
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.original_path:

original_path
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Value of the ``X-Envoy-Original-Path`` request header.
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.request_headers_bytes:

request_headers_bytes
  (`uint64 <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Size of the HTTP request headers in bytes.
  
  This value is captured from the OSI layer 7 perspective, i.e. it does not
  include overhead from framing or encoding at other networking layers.
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.request_body_bytes:

request_body_bytes
  (`uint64 <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Size of the HTTP request body in bytes.
  
  This value is captured from the OSI layer 7 perspective, i.e. it does not
  include overhead from framing or encoding at other networking layers.
  
  
.. _envoy_api_field_filter.HTTPRequestProperties.request_headers:

request_headers
  (map<`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_, `string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_>) Map of additional headers that have been configured to be logged.
  
  


.. _envoy_api_msg_filter.HTTPResponseProperties:

filter.HTTPResponseProperties
-----------------------------

`[filter.HTTPResponseProperties proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L198>`_



.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "response_code": "{...}",
    "response_headers_bytes": "...",
    "response_body_bytes": "...",
    "response_headers": "{...}"
  }

.. _envoy_api_field_filter.HTTPResponseProperties.response_code:

response_code
  (`UInt32Value <https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value>`_) The HTTP response code returned by Envoy.
  
  
.. _envoy_api_field_filter.HTTPResponseProperties.response_headers_bytes:

response_headers_bytes
  (`uint64 <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Size of the HTTP response headers in bytes.
  
  This value is captured from the OSI layer 7 perspective, i.e. it does not
  include overhead from framing or encoding at other networking layers.
  
  
.. _envoy_api_field_filter.HTTPResponseProperties.response_body_bytes:

response_body_bytes
  (`uint64 <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Size of the HTTP response body in bytes.
  
  This value is captured from the OSI layer 7 perspective, i.e. it does not
  include overhead from framing or encoding at other networking layers.
  
  
.. _envoy_api_field_filter.HTTPResponseProperties.response_headers:

response_headers
  (map<`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_, `string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_>) Map of additional headers configured to be logged.
  
  


.. _envoy_api_msg_filter.HTTPAccessLogEntry:

filter.HTTPAccessLogEntry
-------------------------

`[filter.HTTPAccessLogEntry proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L219>`_



.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "common_properties": "{...}",
    "protocol_version": "...",
    "request": "{...}",
    "response": "{...}"
  }

.. _envoy_api_field_filter.HTTPAccessLogEntry.common_properties:

common_properties
  (:ref:`filter.AccessLogCommon <envoy_api_msg_filter.AccessLogCommon>`) Common properties shared by all Envoy access logs.
  
  
.. _envoy_api_field_filter.HTTPAccessLogEntry.protocol_version:

protocol_version
  (:ref:`filter.HTTPAccessLogEntry.HTTPVersion <envoy_api_enum_filter.HTTPAccessLogEntry.HTTPVersion>`) 
  
.. _envoy_api_field_filter.HTTPAccessLogEntry.request:

request
  (:ref:`filter.HTTPRequestProperties <envoy_api_msg_filter.HTTPRequestProperties>`) Description of the incoming HTTP request.
  
  
.. _envoy_api_field_filter.HTTPAccessLogEntry.response:

response
  (:ref:`filter.HTTPResponseProperties <envoy_api_msg_filter.HTTPResponseProperties>`) Description of the outgoing HTTP response.
  
  

.. _envoy_api_enum_filter.HTTPAccessLogEntry.HTTPVersion:

Enum filter.HTTPAccessLogEntry.HTTPVersion
------------------------------------------

`[filter.HTTPAccessLogEntry.HTTPVersion proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L224>`_

HTTP version


.. WARNING::
 This enum type has :ref:`draft <config_overview_v2_status>` status.
.. _envoy_api_enum_value_filter.HTTPAccessLogEntry.HTTPVersion.PROTOCOL_UNSPECIFIED:

PROTOCOL_UNSPECIFIED
  *(DEFAULT)* ⁣
  
.. _envoy_api_enum_value_filter.HTTPAccessLogEntry.HTTPVersion.HTTP10:

HTTP10
  ⁣
  
.. _envoy_api_enum_value_filter.HTTPAccessLogEntry.HTTPVersion.HTTP11:

HTTP11
  ⁣
  
.. _envoy_api_enum_value_filter.HTTPAccessLogEntry.HTTPVersion.HTTP2:

HTTP2
  ⁣
  

.. _envoy_api_msg_filter.ComparisonFilter:

filter.ComparisonFilter
-----------------------

`[filter.ComparisonFilter proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L240>`_

Filter on some integer comparison.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "op": "...",
    "value": "{...}"
  }

.. _envoy_api_field_filter.ComparisonFilter.op:

op
  (:ref:`filter.ComparisonFilter.Op <envoy_api_enum_filter.ComparisonFilter.Op>`) 
  
.. _envoy_api_field_filter.ComparisonFilter.value:

value
  (:ref:`RuntimeUInt32 <envoy_api_msg_RuntimeUInt32>`) Value to compare against.
  
  

.. _envoy_api_enum_filter.ComparisonFilter.Op:

Enum filter.ComparisonFilter.Op
-------------------------------

`[filter.ComparisonFilter.Op proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L242>`_

Comparison operator.


.. WARNING::
 This enum type has :ref:`draft <config_overview_v2_status>` status.
.. _envoy_api_enum_value_filter.ComparisonFilter.Op.EQ:

EQ
  *(DEFAULT)* ⁣
  
.. _envoy_api_enum_value_filter.ComparisonFilter.Op.GE:

GE
  ⁣
  

.. _envoy_api_msg_filter.StatusCodeFilter:

filter.StatusCodeFilter
-----------------------

`[filter.StatusCodeFilter proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L253>`_

Filters on HTTP response/status code.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "comparison": "{...}"
  }

.. _envoy_api_field_filter.StatusCodeFilter.comparison:

comparison
  (:ref:`filter.ComparisonFilter <envoy_api_msg_filter.ComparisonFilter>`) 
  


.. _envoy_api_msg_filter.DurationFilter:

filter.DurationFilter
---------------------

`[filter.DurationFilter proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L258>`_

Filters on total request duration in milliseconds.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "comparison": "{...}"
  }

.. _envoy_api_field_filter.DurationFilter.comparison:

comparison
  (:ref:`filter.ComparisonFilter <envoy_api_msg_filter.ComparisonFilter>`) 
  


.. _envoy_api_msg_filter.NotHealthCheckFilter:

filter.NotHealthCheckFilter
---------------------------

`[filter.NotHealthCheckFilter proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L264>`_

Filters for requests that are not health check requests. A health check
request is marked by the health check filter.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {}




.. _envoy_api_msg_filter.TraceableFilter:

filter.TraceableFilter
----------------------

`[filter.TraceableFilter proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L269>`_

Filters for requests that are traceable. See the tracing overview for more
information on how a request becomes traceable.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {}




.. _envoy_api_msg_filter.RuntimeFilter:

filter.RuntimeFilter
--------------------

`[filter.RuntimeFilter proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L277>`_

Filters for random sampling of requests. Sampling pivots on the header
x-request-id being present. If x-request-id is present, the filter will
consistently sample across multiple hosts based on the runtime key value and
the value extracted from x-request-id. If it is missing, the filter will
randomly sample based on the runtime key value.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "runtime_key": "..."
  }

.. _envoy_api_field_filter.RuntimeFilter.runtime_key:

runtime_key
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) Runtime key to get the percentage of requests to be sampled. This runtime
  control is specified in the range 0-100 and defaults to 0.
  
  


.. _envoy_api_msg_filter.AndFilter:

filter.AndFilter
----------------

`[filter.AndFilter proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L286>`_

Performs a logical “and” operation on the result of each filter in filters.
Filters are evaluated sequentially and if one of them returns false, the
filter returns false immediately.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "filters": []
  }

.. _envoy_api_field_filter.AndFilter.filters:

filters
  (:ref:`filter.AccessLogFilter <envoy_api_msg_filter.AccessLogFilter>`) 
  


.. _envoy_api_msg_filter.OrFilter:

filter.OrFilter
---------------

`[filter.OrFilter proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L293>`_

Performs a logical “or” operation on the result of each individual filter.
Filters are evaluated sequentially and if one of them returns true, the
filter returns true immediately.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "filters": []
  }

.. _envoy_api_field_filter.OrFilter.filters:

filters
  (:ref:`filter.AccessLogFilter <envoy_api_msg_filter.AccessLogFilter>`) 
  


.. _envoy_api_msg_filter.AccessLogFilter:

filter.AccessLogFilter
----------------------

`[filter.AccessLogFilter proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L297>`_



.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "status_code_filter": "{...}",
    "duration_filter": "{...}",
    "not_health_check_filter": "{...}",
    "traceable_filter": "{...}",
    "runtime_filter": "{...}",
    "and_filter": "{...}",
    "or_filter": "{...}"
  }

.. _envoy_api_field_filter.AccessLogFilter.status_code_filter:

status_code_filter
  (:ref:`filter.StatusCodeFilter <envoy_api_msg_filter.StatusCodeFilter>`) 
  
  Only one of :ref:`status_code_filter <envoy_api_field_filter.AccessLogFilter.status_code_filter>`, :ref:`duration_filter <envoy_api_field_filter.AccessLogFilter.duration_filter>`, :ref:`not_health_check_filter <envoy_api_field_filter.AccessLogFilter.not_health_check_filter>`, :ref:`traceable_filter <envoy_api_field_filter.AccessLogFilter.traceable_filter>`, :ref:`runtime_filter <envoy_api_field_filter.AccessLogFilter.runtime_filter>`, :ref:`and_filter <envoy_api_field_filter.AccessLogFilter.and_filter>`, :ref:`or_filter <envoy_api_field_filter.AccessLogFilter.or_filter>` may be set.
  
.. _envoy_api_field_filter.AccessLogFilter.duration_filter:

duration_filter
  (:ref:`filter.DurationFilter <envoy_api_msg_filter.DurationFilter>`) 
  
  Only one of :ref:`status_code_filter <envoy_api_field_filter.AccessLogFilter.status_code_filter>`, :ref:`duration_filter <envoy_api_field_filter.AccessLogFilter.duration_filter>`, :ref:`not_health_check_filter <envoy_api_field_filter.AccessLogFilter.not_health_check_filter>`, :ref:`traceable_filter <envoy_api_field_filter.AccessLogFilter.traceable_filter>`, :ref:`runtime_filter <envoy_api_field_filter.AccessLogFilter.runtime_filter>`, :ref:`and_filter <envoy_api_field_filter.AccessLogFilter.and_filter>`, :ref:`or_filter <envoy_api_field_filter.AccessLogFilter.or_filter>` may be set.
  
.. _envoy_api_field_filter.AccessLogFilter.not_health_check_filter:

not_health_check_filter
  (:ref:`filter.NotHealthCheckFilter <envoy_api_msg_filter.NotHealthCheckFilter>`) 
  
  Only one of :ref:`status_code_filter <envoy_api_field_filter.AccessLogFilter.status_code_filter>`, :ref:`duration_filter <envoy_api_field_filter.AccessLogFilter.duration_filter>`, :ref:`not_health_check_filter <envoy_api_field_filter.AccessLogFilter.not_health_check_filter>`, :ref:`traceable_filter <envoy_api_field_filter.AccessLogFilter.traceable_filter>`, :ref:`runtime_filter <envoy_api_field_filter.AccessLogFilter.runtime_filter>`, :ref:`and_filter <envoy_api_field_filter.AccessLogFilter.and_filter>`, :ref:`or_filter <envoy_api_field_filter.AccessLogFilter.or_filter>` may be set.
  
.. _envoy_api_field_filter.AccessLogFilter.traceable_filter:

traceable_filter
  (:ref:`filter.TraceableFilter <envoy_api_msg_filter.TraceableFilter>`) 
  
  Only one of :ref:`status_code_filter <envoy_api_field_filter.AccessLogFilter.status_code_filter>`, :ref:`duration_filter <envoy_api_field_filter.AccessLogFilter.duration_filter>`, :ref:`not_health_check_filter <envoy_api_field_filter.AccessLogFilter.not_health_check_filter>`, :ref:`traceable_filter <envoy_api_field_filter.AccessLogFilter.traceable_filter>`, :ref:`runtime_filter <envoy_api_field_filter.AccessLogFilter.runtime_filter>`, :ref:`and_filter <envoy_api_field_filter.AccessLogFilter.and_filter>`, :ref:`or_filter <envoy_api_field_filter.AccessLogFilter.or_filter>` may be set.
  
.. _envoy_api_field_filter.AccessLogFilter.runtime_filter:

runtime_filter
  (:ref:`filter.RuntimeFilter <envoy_api_msg_filter.RuntimeFilter>`) 
  
  Only one of :ref:`status_code_filter <envoy_api_field_filter.AccessLogFilter.status_code_filter>`, :ref:`duration_filter <envoy_api_field_filter.AccessLogFilter.duration_filter>`, :ref:`not_health_check_filter <envoy_api_field_filter.AccessLogFilter.not_health_check_filter>`, :ref:`traceable_filter <envoy_api_field_filter.AccessLogFilter.traceable_filter>`, :ref:`runtime_filter <envoy_api_field_filter.AccessLogFilter.runtime_filter>`, :ref:`and_filter <envoy_api_field_filter.AccessLogFilter.and_filter>`, :ref:`or_filter <envoy_api_field_filter.AccessLogFilter.or_filter>` may be set.
  
.. _envoy_api_field_filter.AccessLogFilter.and_filter:

and_filter
  (:ref:`filter.AndFilter <envoy_api_msg_filter.AndFilter>`) 
  
  Only one of :ref:`status_code_filter <envoy_api_field_filter.AccessLogFilter.status_code_filter>`, :ref:`duration_filter <envoy_api_field_filter.AccessLogFilter.duration_filter>`, :ref:`not_health_check_filter <envoy_api_field_filter.AccessLogFilter.not_health_check_filter>`, :ref:`traceable_filter <envoy_api_field_filter.AccessLogFilter.traceable_filter>`, :ref:`runtime_filter <envoy_api_field_filter.AccessLogFilter.runtime_filter>`, :ref:`and_filter <envoy_api_field_filter.AccessLogFilter.and_filter>`, :ref:`or_filter <envoy_api_field_filter.AccessLogFilter.or_filter>` may be set.
  
.. _envoy_api_field_filter.AccessLogFilter.or_filter:

or_filter
  (:ref:`filter.OrFilter <envoy_api_msg_filter.OrFilter>`) 
  
  Only one of :ref:`status_code_filter <envoy_api_field_filter.AccessLogFilter.status_code_filter>`, :ref:`duration_filter <envoy_api_field_filter.AccessLogFilter.duration_filter>`, :ref:`not_health_check_filter <envoy_api_field_filter.AccessLogFilter.not_health_check_filter>`, :ref:`traceable_filter <envoy_api_field_filter.AccessLogFilter.traceable_filter>`, :ref:`runtime_filter <envoy_api_field_filter.AccessLogFilter.runtime_filter>`, :ref:`and_filter <envoy_api_field_filter.AccessLogFilter.and_filter>`, :ref:`or_filter <envoy_api_field_filter.AccessLogFilter.or_filter>` may be set.
  


.. _envoy_api_msg_filter.FileAccessLog:

filter.FileAccessLog
--------------------

`[filter.FileAccessLog proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L311>`_

Custom configuration for an AccessLog that writes log entries directly to a file.
Configures the built-in "envoy.file_access_log" AccessLog.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "path": "...",
    "format": "..."
  }

.. _envoy_api_field_filter.FileAccessLog.path:

path
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) A path to a local file to which to write the access log entries.
  
  
.. _envoy_api_field_filter.FileAccessLog.format:

format
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) [V2-API-DIFF] In addition to the existing format specifiers, the following
  additional specifiers will be available:
  %TLS_SNI_HOSTNAME%: SNI from handshake.
  %TLS_VERSION%: Possible values include: “TLSv1”, “TLSv1.1”, “TLSv1.2”, “TLSv1.3”.
  %TLS_CIPHER_SUITE%: Cipher suite negotiated during the TLS handshake. The
  value is four hex digits defined by the IANA TLS Cipher Suite Registry,
  e.g. “009C” for TLS_RSA_WITH_AES_128_GCM_SHA256.
  TODO(htuch): Document how envoy.http_connection_manager.access_log values
  can be accessed in the format specifier.
  
  


.. _envoy_api_msg_filter.AccessLogServiceConfig:

filter.AccessLogServiceConfig
-----------------------------

`[filter.AccessLogServiceConfig proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L328>`_

Configuration for the built-in "envoy.grpc_access_log" access log type.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "log_name": "...",
    "cluster_name": "..."
  }

.. _envoy_api_field_filter.AccessLogServiceConfig.log_name:

log_name
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) The friendly name of the access log to be returned in StreamAccessLogsMessage.Identifier. This
  allows the access log server to differentiate between different access logs coming from the
  same Envoy.
  
  
.. _envoy_api_field_filter.AccessLogServiceConfig.cluster_name:

cluster_name
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) The name of the upstream cluster that hosts the access log service. The cluster must be
  configured in the cluster manager.
  
  


.. _envoy_api_msg_filter.StreamAccessLogsMessage:

filter.StreamAccessLogsMessage
------------------------------

`[filter.StreamAccessLogsMessage proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L342>`_

Stream message for the StreamAccessLogs API. Envoy will open a stream to the server and stream
access logs without ever expecting a response.


.. WARNING::
 This message type has :ref:`experimental <config_overview_v2_status>` status.
.. code-block:: json

  {
    "identifier": "{...}",
    "http_logs": "{...}",
    "tcp_logs": "{...}"
  }

.. _envoy_api_field_filter.StreamAccessLogsMessage.identifier:

identifier
  (:ref:`filter.StreamAccessLogsMessage.Identifier <envoy_api_msg_filter.StreamAccessLogsMessage.Identifier>`) Identifier data that will only be sent in the first message on the stream. This is effectively
  structured metadata and is a performance optimization.
  
  
.. _envoy_api_field_filter.StreamAccessLogsMessage.http_logs:

http_logs
  (:ref:`filter.StreamAccessLogsMessage.HTTPAccessLogEntries <envoy_api_msg_filter.StreamAccessLogsMessage.HTTPAccessLogEntries>`) 
  
  Only one of :ref:`http_logs <envoy_api_field_filter.StreamAccessLogsMessage.http_logs>`, :ref:`tcp_logs <envoy_api_field_filter.StreamAccessLogsMessage.tcp_logs>` may be set.
  
.. _envoy_api_field_filter.StreamAccessLogsMessage.tcp_logs:

tcp_logs
  (:ref:`filter.StreamAccessLogsMessage.TCPAccessLogEntries <envoy_api_msg_filter.StreamAccessLogsMessage.TCPAccessLogEntries>`) 
  
  Only one of :ref:`http_logs <envoy_api_field_filter.StreamAccessLogsMessage.http_logs>`, :ref:`tcp_logs <envoy_api_field_filter.StreamAccessLogsMessage.tcp_logs>` may be set.
  
.. _envoy_api_msg_filter.StreamAccessLogsMessage.Identifier:

filter.StreamAccessLogsMessage.Identifier
-----------------------------------------

`[filter.StreamAccessLogsMessage.Identifier proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L343>`_



.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "node": "{...}",
    "log_name": "..."
  }

.. _envoy_api_field_filter.StreamAccessLogsMessage.Identifier.node:

node
  (:ref:`Node <envoy_api_msg_Node>`) The node sending the access log messages over the stream.
  
  
.. _envoy_api_field_filter.StreamAccessLogsMessage.Identifier.log_name:

log_name
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) The friendly name of the log configured in AccessLogServiceConfig.
  
  


.. _envoy_api_msg_filter.StreamAccessLogsMessage.HTTPAccessLogEntries:

filter.StreamAccessLogsMessage.HTTPAccessLogEntries
---------------------------------------------------

`[filter.StreamAccessLogsMessage.HTTPAccessLogEntries proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L356>`_

Wrapper for batches of HTTP access log entries.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "log_entry": []
  }

.. _envoy_api_field_filter.StreamAccessLogsMessage.HTTPAccessLogEntries.log_entry:

log_entry
  (:ref:`filter.HTTPAccessLogEntry <envoy_api_msg_filter.HTTPAccessLogEntry>`) 
  


.. _envoy_api_msg_filter.StreamAccessLogsMessage.TCPAccessLogEntries:

filter.StreamAccessLogsMessage.TCPAccessLogEntries
--------------------------------------------------

`[filter.StreamAccessLogsMessage.TCPAccessLogEntries proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L361>`_

Wrapper for batches of TCP access log entries.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "log_entry": []
  }

.. _envoy_api_field_filter.StreamAccessLogsMessage.TCPAccessLogEntries.log_entry:

log_entry
  (:ref:`filter.TCPAccessLogEntry <envoy_api_msg_filter.TCPAccessLogEntry>`) 
  



.. _envoy_api_msg_filter.StreamAccessLogsResponse:

filter.StreamAccessLogsResponse
-------------------------------

`[filter.StreamAccessLogsResponse proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L374>`_

Empty response for the StreamAccessLogs API. Will never be sent. See below.


.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {}




.. _envoy_api_msg_filter.AccessLog:

filter.AccessLog
----------------

`[filter.AccessLog proto] <https://github.com/envoyproxy/data-plane-api/blob/master/api/filter/accesslog.proto#L389>`_



.. WARNING::
 This message type has :ref:`draft <config_overview_v2_status>` status.
.. code-block:: json

  {
    "name": "...",
    "filter": "{...}",
    "config": "{...}"
  }

.. _envoy_api_field_filter.AccessLog.name:

name
  (`string <https://developers.google.com/protocol-buffers/docs/proto#scalar>`_) The name of the access log implementation to instantiate. The name must
  match a statically registered access log. Current built-in loggers include:
  1) "envoy.file_access_log"
  2) "envoy.grpc_access_log"
  
  
.. _envoy_api_field_filter.AccessLog.filter:

filter
  (:ref:`filter.AccessLogFilter <envoy_api_msg_filter.AccessLogFilter>`) Filter which is used to determine if the access log needs to be written.
  
  
.. _envoy_api_field_filter.AccessLog.config:

config
  (`Struct <https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#struct>`_) Custom configuration that depends on the access log being instantiated. built-in configurations
  include:
  1) "envoy.file_access_log": FileAccessLog
  2) "envoy.grpc_access_log": AccessLogServiceConfig
  
  

